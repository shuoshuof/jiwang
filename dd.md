# 1 概述
电路交换：需要建立连接  
报文交换    
分组交换    
## 计算机网络的性能
+ 速率：通常为额定速率或标称速率，而非网络上实际运行的速率
+ 带宽：某信道所能通过的“最高数据率”
+ 吞吐量：实际数据率
+ 时延：
    + 发送时延
    + 传播时延：光纤传播速率约为2.0x $10^{5}$ km/s
+ 时延带宽积：传播时延x带宽


# 3 数据链路层
三个基本问题：封装成帧、透明传输和差错检测
## 点对点协议PPP
特点：简单，封装成帧，透明性，支持多种网络层协议，支持多种类型链路  
### PPP协议的帧格式
字节填充：0x7E->0x7D,0x5E 0x7D->0x7D,0x5D   
零比特填充：5个连续1后填0

### MAC层










# 4 网络层
网络层尽最大努力交付。  
划分为数据层面和控制层面。  
## 网际协议IP
+ 物理层中间设备转发器
+ 数据链路层网桥、桥接器、交换机
+ 网络层路由器
+ 网路层之上网关
### IP地址
32位    
A类 0 B 10 C 110 D 1110     
网络号全0，本网络   
网络号全1.环回测试  
如果主机号全0，IP地址代表仅网络号指向的那个网段，该IP代表一个网段；     
如果主机号全1，IP地址代表网络号指向的全部主机，IP地址代表广播地址    
### IP地址与MAC地址
![图 1](images/cc4d04a275a01badf193ec454b32db27d002df1eb35bf259dd91d1aa5c0dcde4.png)
### 地址解析协议ARP
### IP数据报的格式
136     
+ 标志 MF=1 还有分片
+ 片偏移 以8个字节为单位
+ MTU:数据链路层协议规定的一个数据帧中的数据字段的最大长度
### 最长前缀匹配
## 网际控制报文协议ICMP
ICMP差错报文和ICMP询问报文  

## IPv6
128位   
### 从IPv4向IPv6过渡
+ 双协议栈
+ 隧道技术
## 路由选择协议
局域网LAN   广域网WAN
### 内部网关协议RIP
160
坏消息传播得慢
### 内部网关协议OSPF
洪泛法发送与本路由器相邻的所有路由器的链路状态。    
Dijkstra算法
### 外部网关协议BGP
边界路由通信须建立TCP连接

X，AS1，R1 从R1经过AS1可到达X

BGP并非仅运行在AS之间，而且也要运行在AS内部。AS内部建立iBGP

BGP路由选择
+ 本地偏好
+ 热土豆（使分组尽快离开AS，而不考虑从哪个路由器离开）

## 虚拟专用网VPN和网络地址转换NAT

## 软件定义网络SDN简介
要点是把网络的控制层面和数据层面分离，而让控制层面利用阮籍来控制数据层面的许多设备。    
SDN取代传统转发表的是“流表”。流表：匹配+动作。  
通信层与数据层面的接口叫作南向API接口。     
到网络控制应用程序层的接口，北向API接口。

# 5 运输层
## 概述
面向通信部分的最高层，用户功能的最底层  
通信的两端是两个主机中的应用进程。  
复用和分用
## UDP
+ 无连接
+ 尽最大努力交付    
+ 面向报文
+ 没有拥塞控制
+ 支持一对一、一对多、多对一和多对多的交互通信

## TCD
+ 面向连接
+ 点对点
+ 可靠交付
+ 全双工
+ 面向字节流
### 套接字
TCP连接的端点。     
(IP地址：端口号)
### ARQ协议
累积确认
### TCP报文段的首部格式
+ 序号
+ 确认号：期望收到对方下一个报文段的第一个数据字节的序号。
+ 确认ACK：ACK=1时确认号字段才有效
+ 同步SYN：在连接建立时用来同步序号。连接请求：SYN=1 ACK=0 同意响应： SYN=1 ACK=1
+ 终止FIN：用来释放一个连接。
## TCP的拥塞控制
拥塞窗口 cwnd
+ 慢开始
+ 拥塞避免：调整门限值 ssthresh=cwnd/2
+ 快重传
+ 快恢复：ssthresh=cwnd/2=8 cwnd = ssthresh =8

发送放窗口=Min(rwnd,cwnd)
## TCP 的运输连接管理
### 连接建立
三次握手：
+ SYN=1 ACK=0 ->
+ SYN=1 ACK=1 <-
+ SYN=0 ACK=1 ->
### 连接释放
+ FIN=1 ->
+ ACK=1 <-
+ 数据传送 <-
+ FIN=1,ACK=1 <-
+ ACK=1 ->





















